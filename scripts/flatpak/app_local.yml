- name: poetry-core
  cleanup:
  - "*"
  buildsystem: simple
  build-commands:
    - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
      --prefix=${FLATPAK_DEST} "poetry-core==2.2.1" --no-build-isolation
  sources:
    - type: file
      url: https://files.pythonhosted.org/packages/c7/d8/bb2f602f5e012e177e1c8560125f9770945d36622595990cf1cb794477c2/poetry_core-2.2.1-py3-none-any.whl
      sha256: bdfce710edc10bfcf9ab35041605c480829be4ab23f5bc01202cfe5db8f125ab
- name: {APP_MODULE}
  buildsystem: simple
  build-commands:
  - pip3 install --no-index --no-deps --no-build-isolation --prefix=${FLATPAK_DEST} --root=/ .
  sources:
  - type: archive
    path: {TAR_FILE}
    sha256: {TAR_FILE_SHA256}
- name: meta
  buildsystem: simple
  build-commands:
  - install -Dm 644 {APP_ID}.desktop     ${FLATPAK_DEST}/share/applications/{APP_ID}.desktop
  - install -Dm 644 {APP_ID}.appdata.xml ${FLATPAK_DEST}/share/metainfo/{APP_ID}.appdata.xml
  - install -Dm 644 {APP_ID}.xml         ${FLATPAK_DEST}/share/mime/packages/{APP_ID}.xml
  - (cd icons && find * -type f -exec install -Dm 644 "{}" "${FLATPAK_DEST}/share/icons/{}" \;)
  sources:
  - type: dir
    path: ./meta
