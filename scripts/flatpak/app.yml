app-id: "{APP_ID}"
runtime: org.kde.Platform
runtime-version: "5.15-24.08"
sdk: org.kde.Sdk
base: com.riverbankcomputing.PyQt.BaseApp
base-version: "5.15-24.08"
command: "{APP_MODULE}"
finish-args:
# OpenGL
- "--device=dri"
# GUI
- "--share=ipc"
- "--socket=x11"
# Sound
- "--socket=pulseaudio"
# Files & network
- "--share=network"
- "--filesystem=host"
- "--filesystem=xdg-run/gvfs"
# Screen inhibit
- "--talk-name=org.freedesktop.ScreenSaver"
# Can't use Wayland
- "--env=QT_QPA_PLATFORM=xcb"
# Disable annoying warnings
# Qt: Session managment error: Could not open network socket
# https://stackoverflow.com/questions/986964/qt-session-management-error
- "--env=SESSION_MANAGER="

# Cleanup for com.riverbankcomputing.PyQt.BaseApp
cleanup-commands:
  - /app/cleanup-BaseApp.sh
build-options:
  env:
    - BASEAPP_REMOVE_WEBENGINE=1

cleanup:
- "/include"
- "/lib/*.a"
- "/lib/*.la"
- "/lib/pkgconfig"
- "/share/man"

modules:
- libvlc.yml
- dependencies.yml
